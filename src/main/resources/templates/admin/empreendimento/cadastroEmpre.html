<!DOCTYPE html>
<html lange="pt" layout:decorate="~{layouts/layoutL}">

<head>

	<title>Configurações - Empreendimentos</title>

	<!-- jQuery Autocomplete -->
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>

<body>

	<!-- FORMULARIO PARA CADASTRAR UM EMPREENDIMENTO 
		th:object DIZ O OBJETO PARA QUAL O FORMULARIO PREENCHERA OS ATRIBUTOS
		th:action AÇÃO QUE AQUELA DETERMINADA TAG VAI FAZER
		th:field="${usuario.***}", TRATA-SE DO ATRIBUTO DO OBEJTO QUE AQUELE CAMPO VAI SE TRATAR
	-->

	<!--
		INFORMA QUE ESSA É A PARTE QUE FICA EM DETERMINADA PARTE DO ARQUIVO DE LAYOUT  
	-->
	<section layout:fragment="corpo2">

		<nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);"
			aria-label="breadcrumb" class="w-100">
			<div class="container">
				<ol class="breadcrumb mt-3">
					<li class="breadcrumb-item"><a class="text-decoration-none " href="/adm">Início</a></li>
					<li class="breadcrumb-item active" aria-current="page">Configurações de empreendimento</li>
				</ol>
			</div>
		</nav>

		<div class="container">

			<div class="card-body text-success text-center">
				<!--IMPORTA PARA ESSA PAGINAS O ARQUIVO QUE CONTEM AS MENSAGENS DE ERRO
					E SUCESSO  -->
				<div th:replace="fragmentos/mensagens" style="color:black;"></div>
			</div>

			<div class="row text-center">

				<div class="col-md-6">
					<div class="card border-primary mb-3" style="max-width: 36rem;">
						<div class="card-header bg-primary text-white fw-bold">
							Cadastro de empreendimentos
						</div>


						<form class="px-4" th:action="@{/usuario/salva}" th:object="${empre}" method="POST"
							align="center" enctype="multipart/form-data">

							<input type="hidden" th:field="${empre.id}" />

							<div class="my-3" style="text-align: left;">
								<label for="exampleInputName1" class="form-label">Nome: </label>
								<input type="text" th:field="${empre.nome}" class="form-control" id="exampleInputName1">

							</div>
							<div class="mb-3" style="text-align: left;">
								<label for="exampleInputEmail1" class="form-label"
									style="text-align: left;">Email:</label>
								<input input type="email" th:field="${empre.email}" class="form-control"
									id="exampleInputEmail1" aria-describedby="emailHelp">
							</div>

							<div class="mb-3" style="text-align: left;">
								<label for="exampleInputName1" class="form-label">Cidade:
								</label>

								<select class="form-select" id="cidade" th:field="${empre.cidade.id}">
									<option selected th:value="0" class="select">Escolha uma cidade</option>
									<option th:each="c : ${cidades}" th:value="${c.id}" th:text="${c.nome}">
									</option>
								</select>
							</div>

							<div class="mb-3" style="text-align: left;">
								<label for="exampleInputName1" class="form-label">
									Descrição:
								</label>
								<textarea class="form-control" placeholder="Escreva a descrição do empreendimento"
									maxlength="255" style="height: 130px" th:field="${empre.descricao}"
									id="texto_descricao">
								</textarea>

							</div>

							<div class="mb-3" style="text-align: left;">
								<label for="exampleInputName1" class="form-label mt-0">
									Foto:
								</label>
								<input class="form-control" type="file" th:name="file" />
								<input type="hidden" th:field="${empre.foto.id}" />
							</div>

							<div class="mb-3" style="text-align: left;" th:if="${empre.criadoPor} != null">
								<div class="row">
									<div class="col-sm-6">
										<label for="exampleInputName1" class="form-label mt-0">
											Criado por:
										</label>
										<input class="form-control" type="text" th:if="${empre.criadoPor} != null"
											th:field="${empre.criadoPor}" readonly />
									</div>
									<div class="col-sm-6">
										<label for="exampleInputName1" class="form-label mt-0">
											Data de criação:
										</label>
										<input class="form-control" type="text" th:if="${empre.criadoPor} != null"
											th:field="${empre.dataCriacao}" readonly />
									</div>
								</div>
							</div>

							<div class="mb-3 py-2" style="text-align: left;">
								<input class="btn btn-success" type="submit"
									th:value="${empre.id}  == 0 ? Cadastrar : Editar" />
								<input class="btn btn-danger" type="submit" th:if="${empre.id} > 0" value="Cancelar"
									formaction="/usuario/cadastroem" formmethod="GET" />
								<input class="btn btn-warning" type="reset" value="Limpar" />
							</div>
						</form>
						<!--QUANDO O FOR PARA CADASTRAR O USUARIO APARECERA O BOT�O "CADASTRO"E PARA EDITAR "EDITAR"  -->


					</div>
				</div>

				<div class="col-md-6 ">
					<div class="card border-primary md-3" style="width: 30rem;">
						<div class="card-header bg-primary fw-bold text-white">Busca de empreendimentos</div>
						<div class="card-body text-dark">


							<form th:action="@{/usuarios/buscaempre}" method="GET" align="center">
								<div class="mb-3" style="text-align: left;">
									<label for="exampleInputEmail1" class="form-label">Nome:
									</label> <input type="text" th:name="nome" class="form-control"
										id="exampleInputEmail1" aria-describedby="emailHelp">

								</div>
								<div class="mb-4" style="text-align: left;">
									<label for="inputSenha" class="form-label" style="text-align: left;">Email:</label>
									<input type="email" th:name="email" class="form-control" id="inputSenha" />
								</div>

								<div class="my-3">
									<input type="checkbox" th:name="mostrarTodosDados" th:value="true" /> Mostrar todos
									os dados
								</div>

								<input class="btn btn-success" type="submit" value="Buscar" />
								<input class="btn btn-warning" type="reset" value="Limpar" />
							</form>

							<div class="mt-3 md-0">
								<p class="fw-bold my-0 py-0 text-muted" style="font-size: 9pt; text-align: justify;">
									<span style="color:red;">*</span> Para buscar todos os empreendimentos clíque em
									buscar
									sem
									preencher nenhum dado
								</p>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row px-3">
			<div class="mt-5" th:if="${not #lists.isEmpty(empreendimentosEncontrados)}">
				<table class="table table-bordered table-striped table-hover">
					<thead class="text-center">
						<tr class="align-middle">
							<th>Foto</th>
							<th>Nome</th>
							<th>Email</th>
							<th>Cidade</th>
							<th th:if="${mostrarTodosDados} == true">Descrição</th>
							<th th:if="${mostrarTodosDados} == true">Criado por</th>
							<th th:if="${mostrarTodosDados} == true">Data de criação</th>
							<th>Operações</th>
						</tr>
					</thead>

					<tbody>
						<tr class="align-middle" th:each="e : ${empreendimentosEncontrados}">
							<td class="text-center" style="width: 14rem;">
								<img th:if="${e.foto != null}" th:src="@{/download/} + ${e.foto.id} + '?salvar=false'"
									style="max-height: 128px" />
							</td>
							<td th:text="${e.nome}"></td>
							<td th:text="${e.email}"></td>
							<td class="text-center" th:text="${e.cidade.nome}"></td>
							<td class="text-start" th:if="${mostrarTodosDados} == true" th:text="${e.descricao}">
							</td>
							<td class="text-center" th:if="${mostrarTodosDados} == true" th:text="${e.criadoPor}">
							</td>
							<td class="text-center" th:if="${mostrarTodosDados} == true" th:text="${e.dataCriacao}">
							</td>

							<td class="text-center">

								<a class="text-decoration-none link-operacao" th:href="'/usuarios/edita/' + ${e.id}"
									title="Editar">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-pencil-square" viewBox="0 0 16 16">
										<path
											d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
										<path fill-rule="evenodd"
											d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
									</svg>
								</a>
								|
								<a class="text-decoration-none link-operacao" th:href="'/usuarios/remove/' + ${e.id}"
									onclick="if (!confirm('Deseja realmente remover o empreendimento?')) return false"
									title="Remover">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-trash-fill" viewBox="0 0 16 16">
										<path
											d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z" />
									</svg>
								</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

	</section>
</body>

</html>